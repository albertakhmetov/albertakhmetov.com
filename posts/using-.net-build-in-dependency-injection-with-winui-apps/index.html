<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Using .NET build-in dependency injection with WinUI apps | Albert Akhmetov</title>
<meta name="keywords" content="WinUI, .NET, DI, IoC">
<meta name="description" content=".NET has build-in dependency injection (DI). It&rsquo;s used primary for ASP.NET Core apps, but there&rsquo;s no reason do not use it with WinUI apps too.">
<meta name="author" content="">
<link rel="canonical" href="https://albertakhmetov.com/posts/using-.net-build-in-dependency-injection-with-winui-apps/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://albertakhmetov.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://albertakhmetov.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://albertakhmetov.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://albertakhmetov.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://albertakhmetov.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://albertakhmetov.com/posts/using-.net-build-in-dependency-injection-with-winui-apps/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Using .NET build-in dependency injection with WinUI apps" />
<meta property="og:description" content=".NET has build-in dependency injection (DI). It&rsquo;s used primary for ASP.NET Core apps, but there&rsquo;s no reason do not use it with WinUI apps too." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://albertakhmetov.com/posts/using-.net-build-in-dependency-injection-with-winui-apps/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-11-09T12:00:00+05:00" />
<meta property="article:modified_time" content="2024-11-09T12:00:00+05:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Using .NET build-in dependency injection with WinUI apps"/>
<meta name="twitter:description" content=".NET has build-in dependency injection (DI). It&rsquo;s used primary for ASP.NET Core apps, but there&rsquo;s no reason do not use it with WinUI apps too."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://albertakhmetov.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Using .NET build-in dependency injection with WinUI apps",
      "item": "https://albertakhmetov.com/posts/using-.net-build-in-dependency-injection-with-winui-apps/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Using .NET build-in dependency injection with WinUI apps",
  "name": "Using .NET build-in dependency injection with WinUI apps",
  "description": ".NET has build-in dependency injection (DI). It\u0026rsquo;s used primary for ASP.NET Core apps, but there\u0026rsquo;s no reason do not use it with WinUI apps too.\n",
  "keywords": [
    "WinUI", ".NET", "DI", "IoC"
  ],
  "articleBody": ".NET has build-in dependency injection (DI). It’s used primary for ASP.NET Core apps, but there’s no reason do not use it with WinUI apps too.\nTo use DI you need to add package reference to the Microsoft.Extensions.DependencyInjection in the project file:\n",
  "wordCount" : "647",
  "inLanguage": "en",
  "datePublished": "2024-11-09T12:00:00+05:00",
  "dateModified": "2024-11-09T12:00:00+05:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://albertakhmetov.com/posts/using-.net-build-in-dependency-injection-with-winui-apps/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Albert Akhmetov",
    "logo": {
      "@type": "ImageObject",
      "url": "https://albertakhmetov.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://albertakhmetov.com/" accesskey="h" title="Albert Akhmetov (Alt + H)">Albert Akhmetov</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://albertakhmetov.com/posts/introduce" title="about me">
                    <span>about me</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Using .NET build-in dependency injection with WinUI apps
    </h1>
    <div class="post-meta"><span title='2024-11-09 12:00:00 +0500 +05'>November 9, 2024</span>

</div>
  </header> 
  <div class="post-content"><p>.NET has build-in dependency injection (DI). It&rsquo;s used primary for ASP.NET Core apps, but there&rsquo;s no reason do not use it with WinUI apps too.</p>
<p>To use DI you need to add package reference to the <a href="https://www.nuget.org/packages/Microsoft.Extensions.DependencyInjection">Microsoft.Extensions.DependencyInjection</a> in the project file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#f92672">&lt;ItemGroup&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.Extensions.Hosting&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;8.0.1&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/ItemGroup&gt;</span>
</span></span></code></pre></div><p>To create <code>IHostBuilder</code> we need to take control over application initialization. For this purpose add the following constrant to the project file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#f92672">&lt;PropertyGroup&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">&lt;!-- Use our own Main entry point so we can control the IHostBuilder --&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;DefineConstants&gt;</span>DISABLE_XAML_GENERATED_MAIN<span style="color:#f92672">&lt;/DefineConstants&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- We use App class to place Main method --&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;StartupObject&gt;</span>DependencyInjection.App<span style="color:#f92672">&lt;/StartupObject&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></div><p>This constraint disables <code>Main</code> method in the auto-generated <code>App</code> class. You can check this class out by the following path: <code>obj/x64/Debug/App.g.i.cs</code>.</p>
<p>To initialize <code>IHostBuilder</code> add <code>Main</code> static method to the <code>App</code> class:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> Main(<span style="color:#66d9ef">string</span>[] args)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> builder = CreateBuilder(args);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> host = builder.Build();
</span></span><span style="display:flex;"><span>    host.Run();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>CreateBuilder</code> method creates and initializes <code>HostApplicationBuilder</code> class:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> HostApplicationBuilder CreateBuilder(<span style="color:#66d9ef">string</span>[] args)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> builder = Host.CreateApplicationBuilder(args);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    builder.Services.AddSingleton&lt;IApp, App&gt;();
</span></span><span style="display:flex;"><span>    builder.Services.AddHostedService&lt;AppService&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> builder;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This is all about initializing the dependency injection infrastructure. To run the application (or just to compile successfully), we need to implement the application lifecycle infrastructure.</p>
<p>An application lifecycle is controlled by <code>AppService</code> service class. It implements <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.hosting.ihostedservice"><code>IHostedService</code></a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AppService</span> : IHostedService
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> ILogger&lt;AppService&gt; logger;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> IServiceProvider serviceProvider;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> IHostApplicationLifetime appLifetime;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> IApp? app;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Task? appTask;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> AppService(
</span></span><span style="display:flex;"><span>        ILogger&lt;AppService&gt; logger,
</span></span><span style="display:flex;"><span>        IServiceProvider serviceProvider,
</span></span><span style="display:flex;"><span>        IHostApplicationLifetime appLifetime)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.logger = logger ?? <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentNullException(nameof(logger));
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.serviceProvider = serviceProvider ?? <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentNullException(nameof(serviceProvider));
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.appLifetime = appLifetime ?? <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentNullException(nameof(appLifetime));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Task StartAsync(CancellationToken cancellationToken)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        XamlCheckProcessRequirements();
</span></span><span style="display:flex;"><span>        WinRT.ComWrappersSupport.InitializeComWrappers();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        appTask = Task.Factory
</span></span><span style="display:flex;"><span>            .StartNew(() =&gt; Application.Start(InitAndStartApp))
</span></span><span style="display:flex;"><span>            .ContinueWith(_ =&gt; OnAppClosed());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Task.CompletedTask;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Task StopAsync(CancellationToken cancellationToken)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        app?.Exit();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Task.CompletedTask;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> InitAndStartApp(ApplicationInitializationCallbackParams p)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> context = <span style="color:#66d9ef">new</span> DispatcherQueueSynchronizationContext(DispatcherQueue.GetForCurrentThread());
</span></span><span style="display:flex;"><span>            SynchronizationContext.SetSynchronizationContext(context);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            app = serviceProvider.GetRequiredService&lt;IApp&gt;();
</span></span><span style="display:flex;"><span>            app.UnhandledException += OnAppOnUnhandledException;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">catch</span> (Exception ex)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            logger.LogError(ex, <span style="color:#e6db74">&#34;An error occurred while initializing the application&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> OnAppClosed()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        appTask = <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (app != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            app.UnhandledException -= OnAppOnUnhandledException;
</span></span><span style="display:flex;"><span>            app = <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        appLifetime.StopApplication();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> OnAppOnUnhandledException(<span style="color:#66d9ef">object</span> sender, UnhandledExceptionEventArgs args)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        logger.LogError(args.Exception, <span style="color:#e6db74">&#34;An unhandled application exception occured&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        args.Handled = <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [DllImport(&#34;microsoft.ui.xaml.dll&#34;)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">void</span> XamlCheckProcessRequirements();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>When the program starts, the <code>StartAsync</code> method is called. This method initializes the WinUI infrastructure and starts the application. <a href="https://learn.microsoft.com/en-us/windows/windows-app-sdk/api/winrt/microsoft.ui.xaml.application.start"><code>Start</code></a> method blocks the thread until the application is exit. Therefore, we run it in a task with continuation to call the <code>OnAppClosed</code> method. <code>OnAppClosed</code> method is used to stop the service when application is exit.</p>
<p>The <code>InitAndStartApp</code> method is called from the UI thread, so we create an instance of the <code>App</code> class there. How? <code>App</code> class implements the following <code>IApp</code> interface:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">IApp</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> Exit();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">event</span> UnhandledExceptionEventHandler UnhandledException;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>When we request the <code>IApp</code> interface, instance of the <code>App</code> class is created. <code>IApp</code> interface provides <code>Exit</code> method to terminate the application (is used in <code>StopAsync</code> method) and <code>UnhandledException</code> event to log exceptions (<code>OnAppOnUnhandledException</code> method).</p>
<p>That&rsquo;s it. We implemented DI infrastructure and the application lifetime service. From this moment we can register services in the <code>CreateBuilder</code> method and refer them in a class constructor.</p>
<p>As example, let&rsquo;s change initialization of main window from creating via constructor to initialize it with DI.</p>
<p>To retrieve <code>App</code> interface in <code>MainWindow</code> class we need to add parameterized constructor as following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> IApp app;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> MainWindow(IApp app)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">this</span>.app = app ?? <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentNullException(nameof(app));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    InitializeComponent();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Then register the class in <code>CreateBuilder</code> method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">// We use a singleton because the application has only one main window.</span>
</span></span><span style="display:flex;"><span>builder.Services.AddSingleton&lt;MainWindow&gt;();
</span></span></code></pre></div><p><code>OnLaunched</code> method in <code>App</code> class looks like the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">void</span> OnLaunched(LaunchActivatedEventArgs args)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">base</span>.OnLaunched(args);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	mainWindow = serviceProvider.GetRequiredService&lt;MainWindow&gt;();
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// The application exits when the main window closes.</span>
</span></span><span style="display:flex;"><span>	mainWindow.Closed += OnMainWindowClosed;
</span></span><span style="display:flex;"><span>	mainWindow.AppWindow.Show(<span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> OnMainWindowClosed(<span style="color:#66d9ef">object</span> sender, WindowEventArgs args)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Exit();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The demo project is available <a href="https://github.com/albertakhmetov/albertakhmetov.com/tree/main/DependencyInjection">here</a>.</p>
<p>Learn more about <a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/dependency-injection">.NET dependency injection</a>.</p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://albertakhmetov.com/tags/winui/">WinUI</a></li>
      <li><a href="https://albertakhmetov.com/tags/.net/">.NET</a></li>
      <li><a href="https://albertakhmetov.com/tags/di/">DI</a></li>
      <li><a href="https://albertakhmetov.com/tags/ioc/">IoC</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://albertakhmetov.com/">Albert Akhmetov</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
